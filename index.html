<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta name="google-site-verification" content="61fo7jboEh_yjqDy9wookQE0lFghsk4CQnk5VNTj1m0" />
  <title>è¢«é¨“è€…å‹Ÿé›†æ²ç¤ºæ¿ï½œå¤§å­¦ç ”ç©¶ãƒ»å¿ƒç†å­¦å®Ÿé¨“ã¸ã®å‚åŠ å‹Ÿé›†</title>
  <meta name="description" content="å¤§å­¦ãªã©ã®ç ”ç©¶ãƒ»å®Ÿé¨“ã¸ã®å‚åŠ è€…ã‚’å‹Ÿé›†ã™ã‚‹æ²ç¤ºæ¿ã§ã™ã€‚å¿ƒç†å­¦å®Ÿé¨“ã€è¡Œå‹•ç§‘å­¦ã€èªçŸ¥ç ”ç©¶ãªã©ã®è¢«é¨“è€…å‹Ÿé›†æƒ…å ±ã‚’æ²è¼‰ã—ã¦ã„ã¾ã™ã€‚ç ”ç©¶å‚åŠ ã®å‰ã«ãƒãƒªã‚·ãƒ¼ã‚’ã”ç¢ºèªãã ã•ã„ã€‚" />
  <meta name="keywords" content="è¢«é¨“è€…å‹Ÿé›†, å®Ÿé¨“å‹Ÿé›†, ç ”ç©¶å‚åŠ , å¿ƒç†å­¦å®Ÿé¨“, è¡Œå‹•ç§‘å­¦, å¤§å­¦ç”Ÿãƒã‚¤ãƒˆ, å®Ÿé¨“ãƒ¢ãƒ‹ã‚¿ãƒ¼" />
  <meta property="og:title" content="è¢«é¨“è€…å‹Ÿé›†æ²ç¤ºæ¿ï½œç ”ç©¶ãƒ»å®Ÿé¨“å‚åŠ è€…å‹Ÿé›†ã‚µã‚¤ãƒˆ" />
  <meta property="og:description" content="å¤§å­¦ç ”ç©¶ã‚„å¿ƒç†å­¦å®Ÿé¨“ã®è¢«é¨“è€…ã‚’å‹Ÿé›†ã—ã¦ã„ã¾ã™ã€‚ç ”ç©¶å‚åŠ å‰ã«ãƒãƒªã‚·ãƒ¼ã‚’ã”ç¢ºèªãã ã•ã„ã€‚" />
  <meta property="og:url" content="https://hikennsya.github.io/-/index.html" />
  <meta property="og:image" content="https://hikennsya.github.io/-/img/img1.png" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="site-header">
    <nav class="navbar">
      <h1 class="logo"><a href="index.html">è¢«é¨“è€…å‹Ÿé›†æ²ç¤ºæ¿</a></h1>
      <ul class="nav-links">
        <li><a href="index.html">ãƒ›ãƒ¼ãƒ </a></li>
        <li><a href="policy.html">ãƒãƒªã‚·ãƒ¼</a></li>
        <li><a href="recruit.html">æ²è¼‰</a></li>
        <li><a href="contact.html">ãŠå•ã„åˆã‚ã›</a></li>
      </ul>
    </nav>
  </header>

  <script>
    // ç¾åœ¨ãƒšãƒ¼ã‚¸ã‚’åˆ¤å®šã—ã¦ãƒŠãƒ“ã‚’å¼·èª¿
    const currentPage = window.location.pathname.split("/").pop();
    document.querySelectorAll(".nav-links a").forEach(link => {
      if (link.getAttribute("href") === currentPage) {
        link.classList.add("active");
      }
    });
  </script>

  <main class="container">
    <section class="intro-section">
      <h2>ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</h2>
      <p>
        ã“ã®ã‚µã‚¤ãƒˆã€Œè¢«é¨“è€…å‹Ÿé›†æ²ç¤ºæ¿ã€ã¯ã€å¤§å­¦ãªã©ã®ç ”ç©¶ãƒ»å®Ÿé¨“ã¸ã®å‚åŠ è€…ã‚’å‹Ÿé›†ã™ã‚‹ç›®çš„ã§é‹å–¶ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>
        ç ”ç©¶å‚åŠ ã®éš›ã¯ãƒãƒªã‚·ãƒ¼ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
      </p>
      <p class="official-links">
        <a href="https://x.com/hikennsya_keiji" target="_blank">X</a> ï½œ 
        <a href="https://www.threads.net/@hikennsya_keijiban" target="_blank">Threads</a>
      </p>
    </section>

    <section id="posts" class="post-list">
      <div id="loading" class="loading">æŠ•ç¨¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</div>
      <div id="error" class="error" style="display:none;">æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚</div>
    </section>
  </main>

  <footer class="footer">Â© è¢«é¨“è€…å‹Ÿé›†æ²ç¤ºæ¿</footer>

  <!-- âœ… Google Apps Script (GAS) é€£æº -->
  <script>
    const GAS_URL = "https://script.google.com/macros/s/AKfycbz8yfGG9FmkJvm0RDS1AT4uFnTtgpP1OWBEI_AnIGTtdXTLpePPbsHt-a8NbvjND_7V1A/exec";
    const postsContainer = document.getElementById('posts');
    const loading = document.getElementById('loading');
    const error = document.getElementById('error');

    fetch(GAS_URL)
      .then(res => res.json())
      .then(rows => {
        loading.style.display = 'none';
        if (rows.length === 0) {
          postsContainer.innerHTML = '<p>ç¾åœ¨ã€å‹Ÿé›†ä¸­ã®å®Ÿé¨“ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
          return;
        }

        rows.reverse().forEach((item, index) => {
          const postDiv = document.createElement('div');
          postDiv.className = 'post card';
          const likedKey = `liked_${item.id}`;
          const liked = localStorage.getItem(likedKey);

          postDiv.innerHTML = `
            <div class="post-header">
              <span class="post-number">#${rows.length - index}</span>
              <span class="post-timestamp">${item.timestamp}</span>
              <h2>${item.title}</h2>
            </div>
            <div class="post-detail" style="display:none;">
              <p>${item.detail.replace(/\r?\n/g, '<br>')}</p>
            </div>
            <button class="toggle-btn">â–¼ è©³ç´°ã‚’è¡¨ç¤º</button>

            <div class="like-area" style="margin-top:10px;">
              <button class="like-btn" data-id="${item.id}" ${liked ? 'disabled' : ''}>
                ğŸ‘ ã„ã„ã­ (<span class="like-count">${item.likes}</span>)
              </button>
            </div>
          `;

          // âœ… è©³ç´°é–‹é–‰
          const toggleBtn = postDiv.querySelector('.toggle-btn');
          const detail = postDiv.querySelector('.post-detail');
          toggleBtn.addEventListener('click', () => {
            const isVisible = detail.style.display === 'block';
            detail.style.display = isVisible ? 'none' : 'block';
            toggleBtn.textContent = isVisible ? 'â–¼ è©³ç´°ã‚’è¡¨ç¤º' : 'â–² é–‰ã˜ã‚‹';
          });

          // âœ… ã„ã„ã­ãƒœã‚¿ãƒ³
          const likeBtn = postDiv.querySelector('.like-btn');
          const likeCountEl = postDiv.querySelector('.like-count');
          likeBtn.addEventListener('click', () => {
            const id = likeBtn.dataset.id;
            fetch(`${GAS_URL}?id=${id}`, { method: "POST" })
              .then(res => res.json())
              .then(data => {
                likeCountEl.textContent = data.count;
                likeBtn.disabled = true;
                localStorage.setItem(likedKey, "true");
              });
          });

          postsContainer.appendChild(postDiv);
        });
      })
      .catch(err => {
        console.error('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', err);
        loading.style.display = 'none';
        error.style.display = 'block';
      });
  </script>
</body>
</html>
